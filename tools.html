<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>しりとり単語チェックツール</title>
    <script src="words.js"></script>
    <style>
        body { font-family: sans-serif; padding: 20px; background-color: #f9f9f9; }
        textarea { width: 100%; height: 150px; font-size: 1.2rem; padding: 10px; border: 2px solid #FFB6C1; border-radius: 10px; }
        .box { background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); margin-bottom: 20px; }
        button { background: #FF69B4; color: white; border: none; padding: 15px 30px; font-size: 1.2rem; border-radius: 50px; cursor: pointer; font-weight: bold; }
        #output { background: #eee; padding: 15px; border-radius: 10px; white-space: pre-wrap; font-family: monospace; word-break: break-all; }
        .success { color: green; font-weight: bold; }
        .error { color: red; font-weight: bold; }
    </style>
</head>
<body>
    <h2>単語チェックツール</h2>
    
    <div class="box">
        <p>1. 追加したい単語を書いてください（記号はいりません）</p>
        <textarea id="inputWords" placeholder="すいか&#13;めろん&#13;いちご"></textarea>
        <p style="text-align: center;"><button onclick="checkWords()">重複チェック ＆ データ作成</button></p>
    </div>

    <div class="box">
        <h3>2. チェック結果</h3>
        <div id="status"></div>
    </div>

    <div class="box">
        <h3>3. これを全部コピーして words.js に貼り付け</h3>
        <div id="output">（ここに最新のデータが出ます）</div>
    </div>

    <script>
        function checkWords() {
            // words.js から今のリストを取得（読み込めていない場合は空にする）
            let currentList = [];
            if (typeof wordsData !== 'undefined') {
                currentList = wordsData.map(w => w.kana);
            }

            const input = document.getElementById('inputWords').value;
            const newWordsRaw = input.split(/[\s,、\n]+/).filter(w => w.length > 0);
            
            let added = [];
            let duplicated = [];

            newWordsRaw.forEach(word => {
                if (currentList.includes(word) || added.includes(word)) {
                    duplicated.push(word);
                } else {
                    added.push(word);
                }
            });

            // 結果表示
            const statusEl = document.getElementById('status');
            statusEl.innerHTML = `<p class="success">新しく増える単語: ${added.join(', ') || 'なし'}</p>` +
                                 `<p class="error">既にある単語: ${duplicated.join(', ') || 'なし'}</p>`;

            // 出力作成
            const allWords = currentList.concat(added);
            const jsonText = allWords.map(w => `{kana:"${w}"}`).join(',');
            document.getElementById('output').innerText = `const wordsData = [${jsonText}];`;
        }
    </script>
</body>
</html>
